<!DOCTYPE html>
<html lang="en">
  <head>
    <title>FootlessParser  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
  </head>
  <body>
    <a title="FootlessParser  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">FootlessParser Docs</a> (93% documented)</p>
        <p class="header-right"><a href="https://github.com/kareman/FootlessParser"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">FootlessParser Reference</a>
        <img id="carat" src="img/carat.png" />
        FootlessParser  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
          <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/ParserInput.html">ParserInput</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions.html#/s:O6Result6Result">Result</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
          <a href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Functions.html#/s:ZF14FootlessParseroi2mgU____FTGVS_6ParserQ_Q0__GS0_Q_Q1___GS0_Q_Q1__">*&gt;(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:ZF14FootlessParseroi2lmU____FTGVS_6ParserQ_Q0__GS0_Q_Q1___GS0_Q_Q0__">&lt;*(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:ZF14FootlessParseroi3lmgU____FTGVS_6ParserQ_FQ0_Q1__GS0_Q_Q0___GS0_Q_Q1__">&lt;*&gt;(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:ZF14FootlessParseroi3lmgU____FTGO6Result6ResultFQ_Q0_Q1__GS1_Q_Q1___GS1_Q0_Q1__">&lt;*&gt;(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:ZF14FootlessParseroi3lxgU____FTFQ0_Q1_GVS_6ParserQ_Q0___GS0_Q_Q1__">&lt;^&gt;(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:ZF14FootlessParseroi3lxgU____FTFQ_Q0_GO6Result6ResultQ_Q1___GS1_Q0_Q1__">&lt;^&gt;(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:ZF14FootlessParseroi3logU___FTGVS_6ParserQ_Q0__GS0_Q_Q0___GS0_Q_Q0__">&lt;|&gt;(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:ZF14FootlessParseroi2eeU__FTGVS_11ParserInputQ__GS0_Q___Sb">==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:ZF14FootlessParseroi3ggsU____FTGVS_6ParserQ_Q0__FQ0_GS0_Q_Q1___GS0_Q_Q1__">&gt;&gt;-(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser3anyU__FT_GVS_6ParserQ_Q__">any()</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser4charFVSs9CharacterGVS_6ParserS0_S0__">char(_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser5countU__FTSiGVS_6ParserQ_VSs9Character__GS0_Q_SS_">count(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser5countU___FTSiGVS_6ParserQ_Q0___GS0_Q_GSaQ0___">count(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser5countU___FTGVSs5RangeSi_GVS_6ParserQ_Q0___GS1_Q_GSaQ0___">count(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser5countU__FTGVSs5RangeSi_GVS_6ParserQ_VSs9Character__GS1_Q_SS_">count(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser3eofU__FT_GVS_6ParserQ_T__">eof()</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser6extendU_Ss24ExtensibleCollectionType_USs13GeneratorType_Ss16ForwardIndexType_Ss18_SignedIntegerType_Ss33_BuiltinIntegerLiteralConvertible____FQ_FT2xsQ0__Q0_">extend(_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser6extendUSs24ExtensibleCollectionType_Ss14CollectionType_USs13GeneratorType__Ss16ForwardIndexType_Ss18_SignedIntegerType_Ss33_BuiltinIntegerLiteralConvertible___S2__S3__S4__S5_____FQ_FT3xs2Q0__Q_">extend(_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser4failU___FSSGVS_6ParserQ_Q0__">fail(_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser6noneOfUSs9Equatable_Ss14CollectionType_USs13GeneratorType_Ss16ForwardIndexType_Ss18_SignedIntegerType_Ss33_BuiltinIntegerLiteralConvertible____FQ0_GVS_6ParserQ_Q__">noneOf(_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser3notUSs9Equatable__FQ_GVS_6ParserQ_Q__">not(_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser5oneOfUSs9Equatable_Ss14CollectionType_USs13GeneratorType_Ss16ForwardIndexType_Ss18_SignedIntegerType_Ss33_BuiltinIntegerLiteralConvertible____FQ0_GVS_6ParserQ_Q__">oneOf(_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser9oneOrMoreU___FGVS_6ParserQ_Q0__GS0_Q_GSaQ0___">oneOrMore(_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser9oneOrMoreU__FGVS_6ParserQ_VSs9Character_GS0_Q_SS_">oneOrMore(_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser8optionalU___FTGVS_6ParserQ_Q0__9otherwiseQ0__GS0_Q_Q0__">optional(_:otherwise:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser5parseU__Ss14CollectionType_USs13GeneratorType_Ss16ForwardIndexType_Ss18_SignedIntegerType_Ss33_BuiltinIntegerLiteralConvertible____FTGVS_6ParserQ0_Q__Q1__GO6Result6ResultQ_SS_">parse(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser4pureU___FQ_GO6Result6ResultQ_Q0__">pure(_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser4pureU___FQ0_GVS_6ParserQ_Q0__">pure(_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser7satisfyU__FT6expectSSFQ_Sb_GVS_6ParserQ_Q__">satisfy(expect:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser5tokenUSs9Equatable__FQ_GVS_6ParserQ_Q__">token(_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser6tokensUSs9Equatable_Ss14CollectionType_USs13GeneratorType_Ss16ForwardIndexType_Ss18_SignedIntegerType_Ss33_BuiltinIntegerLiteralConvertible____FQ0_GVS_6ParserQ_Q0__">tokens(_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser10zeroOrMoreU___FGVS_6ParserQ_Q0__GS0_Q_GSaQ0___">zeroOrMore(_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F14FootlessParser10zeroOrMoreU__FGVS_6ParserQ_VSs9Character_GS0_Q_SS_">zeroOrMore(_:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
          <a href="Structs.html">Structs</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/Parser.html">Parser</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ParserInput.html">ParserInput</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <a href='#footlessparser' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='footlessparser'>FootlessParser</h1>

<p>FootlessParser is a simple and pretty naive implementation of a parser combinator in Swift. It enables infinite lookahead, non-ambiguous parsing with error reporting.</p>

<p>There is <a href="http://blog.nottoobadsoftware.com/footlessparser/">a series of blog posts about the development</a> and <a href="http://kareman.github.io/FootlessParser/">documentation from the source code</a>.</p>
<a href='#introduction' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='introduction'>Introduction</h3>

<p>In short, FootlessParser lets you define parsers like this:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">parser</span> <span class="o">=</span> <span class="n">function1</span> <span class="o">&lt;^&gt;</span> <span class="n">parser1</span> <span class="o">&lt;*&gt;</span> <span class="n">parser2</span> <span class="o">&lt;|&gt;</span> <span class="n">parser3</span>
</code></pre>

<p><code>function1</code> and <code>parser3</code> return the same type.</p>

<p><code>parser</code> will pass the input to <code>parser1</code> followed by <code>parser2</code>, pass their results to <code>function1</code> and return its result. If that fails it will pass the original input to <code>parser3</code> and return its result.</p>
<a href='#definitions' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='definitions'>Definitions</h3>
<a href='#parser' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='parser'>Parser</h5>

<p>A function which takes some input (a sequence of tokens) and returns either the output and the remaining unparsed part of the input, or an error description if it fails.</p>
<a href='#token' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='token'>Token</h5>

<p>A single item from the input. Like a character from a string, an element from an array or a string from a list of command line arguments.</p>
<a href='#parser_input' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='parser_input'>Parser Input</h5>

<p>Most often text, but can also be an array or really any collection of anything, provided it conforms to CollectionType.</p>
<a href='#parsers' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='parsers'>Parsers</h3>

<p>The general idea is to combine very simple parsers into more complex ones. So <code>char(&quot;a&quot;)</code>  creates a parser which checks if the next token from the input is an “a”. If it is it returns that “a”, otherwise it returns an error. You can then use operators and functions like <code>zeroOrMore</code> and <code>optional</code> to create ever more complex parsers. For more check out <a href="http://kareman.github.io/FootlessParser/Functions.html">the full list of functions</a>.</p>
<a href='#operators' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='operators'>Operators</h3>
<a href='#lt_gt_map' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='lt_gt_map'>&lt;^&gt; (map)</h5>

<p><code>function &lt;^&gt; parser1</code> creates a new parser which runs parser1. If it succeeds it passes the output to <code>function</code> and returns the result.</p>
<a href='#lt_gt_apply' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='lt_gt_apply'>&lt;*&gt; (apply)</h5>

<p><code>function &lt;^&gt; parser1 &lt;*&gt; parser2</code> creates a new parser which first runs parser1. If it succeeds it runs parser2. If that also succeeds it passes both outputs to <code>function</code> and returns the result.</p>

<p>The &lt;*&gt; operator requires its left parser to return a function and is normally used together with &lt;^&gt;. <code>function</code> must take 2 parameters of the correct types, and it must be <a href="https://developer.apple.com/library/ios/documentation/Swift/Conceptual/Swift_Programming_Language/Declarations.html#//apple_ref/doc/uid/TP40014097-CH34-ID363">curried</a>, like this:</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">function</span> <span class="p">(</span><span class="nv">a</span><span class="p">:</span><span class="kt">A</span><span class="p">)(</span><span class="nv">b</span><span class="p">:</span><span class="kt">B</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">C</span> 
</code></pre>

<p>This is because &lt;*&gt; returns the output of 2 parsers and it doesn&rsquo;t know what to do with them. If you want them returned in a tuple, an array or e.g. added together you can do so in the function before &lt;^&gt; .</p>

<p>If there are 3 parsers and 2 &lt;*&gt; the function must take 3 parameters, and so on.</p>
<a href='#lt' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='lt'>&lt;*</h5>

<p>The same as the &lt;*&gt; above, except it discards the result of the parser to its right. Since it only returns one output it doesn&rsquo;t need to be used together with &lt;^&gt; . But you can of course if you want the output converted to something else.</p>
<a href='#gt' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='gt'>*&gt;</h5>

<p>The same as &lt;* , but discards the result of the parser to its left.</p>
<a href='#lt_gt_choice' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='lt_gt_choice'>&lt;|&gt; (choice)</h5>
<pre class="highlight plaintext"><code>parser1 &lt;|&gt; parser2 &lt;|&gt; parser3
</code></pre>

<p>This operator tries all the parsers in order and returns the result of the first one that succeeds.</p>
<a href='#example' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='example'>Example</h3>
<a href='#a_href_http_www_computerhope_com_jargon_c_csv_htm_csv_a_parser' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='a_href_http_www_computerhope_com_jargon_c_csv_htm_csv_a_parser'><a href="http://www.computerhope.com/jargon/c/csv.htm">CSV</a> parser</h4>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">delimiter</span> <span class="o">=</span> <span class="s">","</span> <span class="k">as</span> <span class="kt">Character</span>
<span class="k">let</span> <span class="nv">quote</span> <span class="o">=</span> <span class="s">"</span><span class="se">\"</span><span class="s">"</span> <span class="k">as</span> <span class="kt">Character</span>
<span class="k">let</span> <span class="nv">newline</span> <span class="o">=</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span> <span class="k">as</span> <span class="kt">Character</span>

<span class="k">let</span> <span class="nv">cell</span> <span class="o">=</span> <span class="nf">char</span><span class="p">(</span><span class="n">quote</span><span class="p">)</span> <span class="o">*&gt;</span> <span class="nf">zeroOrMore</span><span class="p">(</span><span class="nf">not</span><span class="p">(</span><span class="n">quote</span><span class="p">))</span> <span class="o">&lt;*</span> <span class="nf">char</span><span class="p">(</span><span class="n">quote</span><span class="p">)</span>
    <span class="o">&lt;|&gt;</span> <span class="nf">zeroOrMore</span><span class="p">(</span><span class="nf">noneOf</span><span class="p">([</span><span class="n">delimiter</span><span class="p">,</span> <span class="n">newline</span><span class="p">]))</span>

<span class="k">let</span> <span class="nv">row</span> <span class="o">=</span> <span class="n">extend</span> <span class="o">&lt;^&gt;</span> <span class="n">cell</span> <span class="o">&lt;*&gt;</span> <span class="nf">zeroOrMore</span><span class="p">(</span> <span class="nf">char</span><span class="p">(</span><span class="n">delimiter</span><span class="p">)</span> <span class="o">*&gt;</span> <span class="n">cell</span> <span class="p">)</span> <span class="o">&lt;*</span> <span class="nf">char</span><span class="p">(</span><span class="n">newline</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">csvparser</span> <span class="o">=</span> <span class="nf">zeroOrMore</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</code></pre>

<p>Here a cell (or field) either:</p>

<ul>
<li>begins with a <q>, then contains anything, including commas, tabs and newlines, and ends with a</q> (both quotes are discarded) </li>
<li>or is unquoted and contains anything but a comma or a newline.</li>
</ul>

<p>Each row then consists of one or more cells, separated by commas and ended by a newline. The <code>extend</code> function joins the cells together into an array. 
Finally the <code>csvparser</code> collects zero or more rows into an array.</p>

<p>To perform the actual parsing:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="nf">parse</span><span class="p">(</span><span class="n">csvparser</span><span class="p">,</span> <span class="n">csvtext</span><span class="p">)</span>
<span class="k">if</span> <span class="k">let</span> <span class="nv">output</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">value</span> <span class="p">{</span>
    <span class="c1">// output is an array of all the rows, </span>
    <span class="c1">// where each row is an array of all its cells.</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">error</span> <span class="p">{</span>
    <span class="nf">println</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<p>The <code>parse</code> function returns a <a href="https://github.com/antitypical/Result">Result</a> which if successful contains the output from the parser, or in case of failure contains the error.</p>
<a href='#installation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='installation'>Installation</h3>
<a href='#using_a_href_https_github_com_carthage_carthage_carthage_a' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='using_a_href_https_github_com_carthage_carthage_carthage_a'>Using <a href="https://github.com/Carthage/Carthage">Carthage</a></h4>
<pre class="highlight plaintext"><code>github "kareman/FootlessParser"
</code></pre>

<p>Then run <code>carthage update</code>.</p>

<p>Follow the current instructions in <a href="https://github.com/Carthage/Carthage#adding-frameworks-to-an-application">Carthage&rsquo;s README</a> for up to date installation instructions.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2015 <a class="link" href="" target="_blank" rel="external">kareman</a>. All rights reserved. (Last updated: 2015-06-16)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.2.1</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
